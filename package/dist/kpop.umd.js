
/**
 * k-pop
 * version: 0.5.0,
 * (c) Christian Kienle, 2019
 * LICENCE: MIT
 * http://github.com/christiankienle/k-pop
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("vue"),require("popper.js")):"function"==typeof define&&define.amd?define(["vue","popper.js"],t):(e=e||self).KPop=t(e.Vue,e.Popper)}(this,function(e,t){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t;var i=function(e){return"string"==typeof e&&e.length>0},s=function(e){var t=e.filter(i);return 0===t.length?null:t},a={name:"NoSsr",functional:!0,props:{placeholder:String,placeholderTag:{type:String,default:"div"}},render:function(e,t){var n=t.parent,o=t.slots,r=t.props,i=o(),s=i.default,a=void 0===s?[]:s,l=i.placeholder;return n._isMounted?a:(n.$once("hook:mounted",function(){n.$forceUpdate()}),r.placeholderTag&&(r.placeholder||l)?e(r.placeholderTag,{class:["no-ssr-placeholder"]},r.placeholder||l):a.length>0?a.map(function(){return e(!1)}):e(!1))}};function l(e){return(l="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(e){return n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)})(e)}var u={selector:"vue-portal-target-".concat(function(e){e=e||21;for(var t="";0<e--;)t+="bjectSymhasOwnProp-0123456789ABCDEFGHIJKLMNQRTUVWXYZ_dfgiklquvxz"[64*Math.random()|0];return t}())},d=function(e){return u.selector=e},p="undefined"!=typeof window&&void 0!==("undefined"==typeof document?"undefined":l(document)),c=e.extend({abstract:!0,name:"PortalOutlet",props:["nodes","tag"],data:function(e){return{updatedNodes:e.nodes}},render:function(e){var t=this.updatedNodes&&this.updatedNodes();return t?t.length<2&&!t[0].text?t:e(this.tag||"DIV",t):e()},destroyed:function(){var e=this.$el;e.parentNode.removeChild(e)}}),f=e.extend({name:"VueSimplePortal",props:{disabled:{type:Boolean},prepend:{type:Boolean},selector:{type:String,default:function(){return"#".concat(u.selector)}},tag:{type:String,default:"DIV"}},render:function(e){if(this.disabled){var t=this.$scopedSlots&&this.$scopedSlots.default();return t?t.length<2&&!t[0].text?t:e(this.tag,t):e()}return e()},created:function(){this.getTargetEl()||this.insertTargetEl()},updated:function(){var e=this;this.$nextTick(function(){e.disabled||e.slotFn===e.$scopedSlots.default||(e.container.updatedNodes=e.$scopedSlots.default),e.slotFn=e.$scopedSlots.default})},beforeDestroy:function(){this.unmount()},watch:{disabled:{immediate:!0,handler:function(e){e?this.unmount():this.$nextTick(this.mount)}}},methods:{getTargetEl:function(){if(p)return document.querySelector(this.selector)},insertTargetEl:function(){if(p){var e=document.querySelector("body"),t=document.createElement(this.tag);t.id=this.selector.substring(1),e.appendChild(t)}},mount:function(){var e=this.getTargetEl(),t=document.createElement("DIV");this.prepend&&e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t),this.container=new c({el:t,parent:this,propsData:{tag:this.tag,nodes:this.$scopedSlots.default}})},unmount:function(){this.container&&(this.container.$destroy(),delete this.container)}}});"undefined"!=typeof window&&window.Vue&&window.Vue===e&&e.use(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.component(t.name||"portal",f),t.defaultSelector&&d(t.defaultSelector)});var h=["scrollParent","viewport","window"],y=h[0],b=Math.pow(2,53)-1;"undefined"!=typeof window&&("undefined"==typeof document||n(document));var m=function(e,t,n,o,r,i,s,a,l,u){"boolean"!=typeof s&&(l=a,a=s,s=!1);var d,p="function"==typeof n?n.options:n;if(e&&e.render&&(p.render=e.render,p.staticRenderFns=e.staticRenderFns,p._compiled=!0,r&&(p.functional=!0)),o&&(p._scopeId=o),i?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(i)},p._ssrRegister=d):t&&(d=s?function(){t.call(this,u(this.$root.$options.shadowRoot))}:function(e){t.call(this,a(e))}),d)if(p.functional){var c=p.render;p.render=function(e,t){return d.call(t),c(e,t)}}else{var f=p.beforeCreate;p.beforeCreate=f?[].concat(f,d):[d]}return n}({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("k-pop-trigger",{ref:"trigger",nativeOn:{click:function(t){return e.handleClickOnTrigger(t)}}},[e._t("trigger",null,null,e.slotProps)],2),e._v(" "),n("no-ssr",[n("portal",{attrs:{selector:e.portalSelector}},[n("div",{ref:"body",class:e.bodyClasses,style:e.bodyStyles,attrs:{"aria-hidden":String(!e.visible_)}},[e._t("default",null,null,e.slotProps),e._v(" "),n("vp-arrow",{class:e.arrowClasses,attrs:{"x-arrow":""}})],2)])],1)],1)},staticRenderFns:[]},void 0,{name:"k-pop",components:{KPopTrigger:{mounted:function(){this.$forceUpdate()},updated:function(){this.$parent.popperReference=this.$el,this.$parent.updatePopperInstance()},render:function(e){return this.$scopedSlots.default()}},NoSsr:a,Portal:f,VpArrow:{render:function(e){return e("span")}}},props:{portalId:{default:function(){return"k-pop-portal-container"},type:String},offset:{type:Number,default:0},adjustsBodyWidth:{type:Boolean,default:!1},adjustsVisibility:{type:Boolean,default:!0},boundary:{type:String,default:y,validator:function(e){return h.indexOf(e)>=0}},theme:{type:String,default:null},bodyClass:{type:String,default:""},defaultBodyZIndex:{type:[Number,String],default:b},arrowClass:{type:String,default:null},transition:{type:String,default:"fade"},withArrow:{type:Boolean,default:!1},flips:{type:Boolean,default:!0},visible:{type:Boolean,default:!1},modifiers:{type:Object,default:function(){}},placement:{type:String,validator:function(e){return t.placements.indexOf(e)>=0},default:"bottom"}},data:function(){return{visible_:this.visible,outOfBoundaries_:!1}},computed:{slotProps:function(){return{visible:this.visible_,show:this.show,hide:this.hide,toggle:this.toggle}},portalSelector:function(){return"#".concat(this.portalId)},stateThatRequiredPopperInstanceUpdate:function(){return{offset:this.offset,flips:this.flips,withArrow:this.withArrow,placement:this.placement}},hasCustomTriggerLogic:function(){return null==this.$slots.trigger&&null!=this.$scopedSlots.trigger},arrowClasses:function(){var e=this.theme,t=this.arrowClass;return s([t,e?"kpop-arrow":null])},bodyStyles:function(){var e={zIndex:this.defaultBodyZIndex};return null==this.theme&&this.adjustsVisibility&&(e.display=this.visible_&&!1===this.outOfBoundaries_?"block":"none"),e},bodyClasses:function(){var e=this.theme,t=this.bodyClass,n=this.withArrow,o=t.split(" ");return s([].concat(r(o),["kpop-body",e?"kpop-theme-".concat(this.theme):null,n?null:"kpop-no-arrow"]))},modifiers_:function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}return e}({updateState:{enabled:!0,order:9999999,fn:this.handleNewPopperState},adjustsBodyWidth:{enabled:this.adjustsBodyWidth,order:0,fn:function(e){var t=e.instance,n=e.offsets,o=t.reference.clientWidth,r=o-n.popper.width;return t.popper.style.width=o+"px",n.popper.width=o,n.popper.left=n.popper.left-.5*r,e}},flip:{enabled:this.flips},arrow:{enabled:this.withArrow},preventOverflow:{enabled:!0,escapeWithReference:!0,boundariesElement:this.boundary},offset:{enabled:!0,offset:"0,".concat(this.offset)}},this.modifiers)}},watch:{adjustsBodyWidth:function(){this.updatePopperInstance()},stateThatRequiredPopperInstanceUpdate:{deep:!0,handler:function(){this.updatePopperInstance()}},visible:function(e){this.visible_=e,e&&null==this.popperInstance&&this.updatePopperInstance(),this.scheduleUpdate()}},beforeDestroy:function(){this.destroyPopperInstance()},mounted:function(){this.$forceUpdate()},methods:{handleNewPopperState:function(e){var t=e.attributes["x-out-of-boundaries"],n=!0===t||""===t||"true"===t;return this.outOfBoundaries_=n,e},handleClickOnTrigger:function(){this.hasCustomTriggerLogic||this.toggle()},destroyPopperInstance:function(){this.popperInstance&&(this.popperInstance.destroy(),this.popperInstance=null)},updatePopperInstance:function(){this.destroyPopperInstance();var e=this.placement,n=this.modifiers_,o=this.popperReference;if(null!=o){var r=this.$refs.body;if(null!=r){var i={modifiers:n,placement:e};this.popperInstance=new t(o,r,i)}}},scheduleUpdate:function(){this.popperInstance&&this.popperInstance.scheduleUpdate()},setVisible:function(e){var t=this;this.visible_=e,this.$emit("update:visible",this.visible_),this.visible_&&null==this.popperInstance&&this.updatePopperInstance(),this.$nextTick(function(){t.scheduleUpdate()})},show:function(){this.setVisible(!0)},hide:function(e){this.setVisible(!1)},toggle:function(){this.setVisible(!this.visible_)}}},void 0,!1,void 0,void 0,void 0);return m.install=function(e){e.component("k-pop",m)},"undefined"!=typeof window&&window.Vue&&window.Vue===Vue&&Vue.use(m),m});
//# sourceMappingURL=kpop.umd.js.map
